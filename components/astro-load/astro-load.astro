---
interface Props {
	id: string;
	apis?: ((context: any) => Promise<Response>)[];
	args?: any;
}

const { id, apis, args } = Astro.props;
const navigate = Astro.request.headers.get("sec-fetch-mode") === "navigate";
const data =
	navigate &&
	apis &&
	(await Promise.all(apis.map((api) => api(Astro).then((response) => response.json()))));
---

<astro-load
	{id}
	data={JSON.stringify(data)}
	navigate={JSON.stringify(navigate)}
	args={JSON.stringify(args)}
>
</astro-load>

<script src="./script"></script>
